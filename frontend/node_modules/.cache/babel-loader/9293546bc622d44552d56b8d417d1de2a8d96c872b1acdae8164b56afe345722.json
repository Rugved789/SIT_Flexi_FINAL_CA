{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import api from'../../utils/api';import{Link}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageCampaigns=()=>{const[campaigns,setCampaigns]=useState([]);useEffect(()=>{fetchCampaigns();},[]);const fetchCampaigns=async()=>{try{const token=localStorage.getItem(\"token\");if(!token){alert(\"Please log in again.\");window.location.href=\"/login\";return;}const response=await api.get(\"/campaigns/my-campaigns\",{headers:{Authorization:\"Bearer \".concat(token)}});// API returns { timestamp, campaigns }\nconst data=response.data&&response.data.campaigns?response.data.campaigns:response.data;setCampaigns(Array.isArray(data)?data:[]);}catch(error){var _error$response;console.error(\"Error fetching NGO campaigns:\",error);const status=(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status;if(status===401){alert(\"Not authorized. Please login again.\");window.location.href=\"/login\";return;}if(status===403){alert(\"Access denied. You need an NGO account to manage campaigns.\");window.location.href=\"/\";return;}alert(\"Error fetching campaigns\");}};;const handleDelete=async id=>{if(window.confirm(\"Are you sure you want to delete this campaign?\")){try{const token=localStorage.getItem(\"token\");await api.delete(\"/campaigns/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});fetchCampaigns();}catch(error){var _error$response2,_error$response2$data;alert(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||\"Error deleting campaign\");}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"manage-campaigns\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Manage Campaigns\"}),/*#__PURE__*/_jsx(Link,{to:\"/ngo-dashboard/create\",className:\"create-btn\",children:\"Create New Campaign\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"campaigns-list\",children:[campaigns.map(campaign=>/*#__PURE__*/_jsxs(\"div\",{className:\"campaign-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:campaign.title}),/*#__PURE__*/_jsx(\"p\",{children:campaign.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"campaign-details\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Goal: \\u20B9\",campaign.goalAmount]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Raised: \\u20B9\",campaign.raisedAmount]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Status: \",campaign.status?campaign.status.charAt(0).toUpperCase()+campaign.status.slice(1):'']})]}),/*#__PURE__*/_jsx(\"div\",{className:\"actions\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(campaign._id),children:\"Delete\"})})]},campaign._id)),campaigns.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No campaigns found. Create your first campaign!\"})]})]});};export default ManageCampaigns;","map":{"version":3,"names":["React","useEffect","useState","api","Link","jsx","_jsx","jsxs","_jsxs","ManageCampaigns","campaigns","setCampaigns","fetchCampaigns","token","localStorage","getItem","alert","window","location","href","response","get","headers","Authorization","concat","data","Array","isArray","error","_error$response","console","status","handleDelete","id","confirm","delete","_error$response2","_error$response2$data","message","className","children","to","map","campaign","title","description","goalAmount","raisedAmount","charAt","toUpperCase","slice","onClick","_id","length"],"sources":["E:/SEM5/Mini_Project/donation-management-system/frontend/src/pages/ngo/ManageCampaigns.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport api from '../../utils/api';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst ManageCampaigns = () => {\r\n  const [campaigns, setCampaigns] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchCampaigns();\r\n  }, []);\r\n\r\n  const fetchCampaigns = async () => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      alert(\"Please log in again.\");\r\n      window.location.href = \"/login\";\r\n      return;\r\n    }\r\n\r\n    const response = await api.get(`/campaigns/my-campaigns`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    // API returns { timestamp, campaigns }\r\n    const data = response.data && response.data.campaigns ? response.data.campaigns : response.data;\r\n    setCampaigns(Array.isArray(data) ? data : []);\r\n  } catch (error) {\r\n    console.error(\"Error fetching NGO campaigns:\", error);\r\n    const status = error.response?.status;\r\n\r\n    if (status === 401) {\r\n      alert(\"Not authorized. Please login again.\");\r\n      window.location.href = \"/login\";\r\n      return;\r\n    }\r\n    if (status === 403) {\r\n      alert(\"Access denied. You need an NGO account to manage campaigns.\");\r\n      window.location.href = \"/\";\r\n      return;\r\n    }\r\n\r\n    alert(\"Error fetching campaigns\");\r\n  }\r\n};\r\n;\r\n\r\n  const handleDelete = async (id) => {\r\n  if (window.confirm(\"Are you sure you want to delete this campaign?\")) {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      await api.delete(`/campaigns/${id}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      fetchCampaigns();\r\n    } catch (error) {\r\n      alert(error.response?.data?.message || \"Error deleting campaign\");\r\n    }\r\n  }\r\n};\r\n\r\n\r\n  return (\r\n    <div className=\"manage-campaigns\">\r\n      <div className=\"header\">\r\n        <h2>Manage Campaigns</h2>\r\n        <Link to=\"/ngo-dashboard/create\" className=\"create-btn\">\r\n          Create New Campaign\r\n        </Link>\r\n      </div>\r\n      <div className=\"campaigns-list\">\r\n        {campaigns.map(campaign => (\r\n          <div key={campaign._id} className=\"campaign-card\">\r\n            <h3>{campaign.title}</h3>\r\n            <p>{campaign.description}</p>\r\n            <div className=\"campaign-details\">\r\n              <span>Goal: ₹{campaign.goalAmount}</span>\r\n              <span>Raised: ₹{campaign.raisedAmount}</span>\r\n              <span>Status: {campaign.status ? campaign.status.charAt(0).toUpperCase() + campaign.status.slice(1) : ''}</span>\r\n            </div>\r\n            <div className=\"actions\">\r\n              <button onClick={() => handleDelete(campaign._id)}>\r\n                Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n        {campaigns.length === 0 && (\r\n          <p>No campaigns found. Create your first campaign!</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageCampaigns;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}