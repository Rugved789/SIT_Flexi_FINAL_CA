{"ast":null,"code":"import _objectSpread from\"E:/SEM5/Mini_Project/donation-management-system/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import api from\"../../utils/api\";import{useNavigate}from\"react-router-dom\";import\"../../styles/Campaign.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateCampaign=()=>{const[campaign,setCampaign]=useState({title:\"\",description:\"\",goalAmount:\"\",category:\"Other\",image:\"\"});const[errors,setErrors]=useState([]);const[success,setSuccess]=useState('');const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();// Client-side validation to avoid backend validation errors\nif(!campaign.title||campaign.title.trim().length<5){setErrors(['Title must be at least 5 characters long']);return;}if(!campaign.description||campaign.description.trim().length<20){setErrors(['Description must be at least 20 characters long']);return;}if(!campaign.goalAmount||Number(campaign.goalAmount)<=0){setErrors(['Goal amount must be a positive number']);return;}try{setErrors([]);setSuccess('');// Ensure goalAmount is sent as a number\nconst payload=_objectSpread(_objectSpread({},campaign),{},{goalAmount:Number(campaign.goalAmount)});await api.post(\"/campaigns/create\",payload);setSuccess('Campaign created successfully!');setTimeout(()=>navigate('/ngo-dashboard/manage'),800);}catch(error){var _error$response;console.error('CreateCampaign error:',error);const resp=(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data;if(resp&&resp.error&&Array.isArray(resp.error.details)&&resp.error.details.length>0){setErrors(resp.error.details.map(d=>d.message||d.msg||JSON.stringify(d)));return;}setErrors([(resp===null||resp===void 0?void 0:resp.message)||'Error creating campaign']);}};const handleChange=e=>{setCampaign(_objectSpread(_objectSpread({},campaign),{},{[e.target.name]:e.target.value}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"create-campaign\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create New Campaign\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[errors.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"form-errors\",children:/*#__PURE__*/_jsx(\"ul\",{children:errors.map((err,idx)=>/*#__PURE__*/_jsx(\"li\",{style:{color:'red'},children:err},idx))})}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"form-success\",style:{color:'green'},children:success}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Campaign Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:campaign.title,onChange:handleChange,required:true,placeholder:\"Enter campaign title\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:campaign.description,onChange:handleChange,required:true,placeholder:\"Describe your campaign\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Goal Amount (\\u20B9)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"goalAmount\",value:campaign.goalAmount,onChange:handleChange,required:true,placeholder:\"Enter target amount\",min:\"1\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",value:campaign.category,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Food\",children:\"Food\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Education\",children:\"Education\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Health\",children:\"Health\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Environment\",children:\"Environment\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Campaign Image URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",name:\"image\",value:campaign.image,onChange:handleChange,placeholder:\"Enter image URL\"}),campaign.image?/*#__PURE__*/_jsx(\"img\",{src:campaign.image,alt:\"Campaign preview\",className:\"preview-image\",onError:e=>e.target.style.display='none'}):/*#__PURE__*/_jsx(\"div\",{className:\"image-placeholder\",children:\"Image preview will appear here\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Create Campaign\"})]})]});};export default CreateCampaign;","map":{"version":3,"names":["React","useState","api","useNavigate","jsx","_jsx","jsxs","_jsxs","CreateCampaign","campaign","setCampaign","title","description","goalAmount","category","image","errors","setErrors","success","setSuccess","navigate","handleSubmit","e","preventDefault","trim","length","Number","payload","_objectSpread","post","setTimeout","error","_error$response","console","resp","response","data","Array","isArray","details","map","d","message","msg","JSON","stringify","handleChange","target","name","value","className","children","onSubmit","err","idx","style","color","type","onChange","required","placeholder","min","src","alt","onError","display"],"sources":["E:/SEM5/Mini_Project/donation-management-system/frontend/src/pages/ngo/CreateCampaign.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport api from \"../../utils/api\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"../../styles/Campaign.css\";\r\n\r\nconst CreateCampaign = () => {\r\n  const [campaign, setCampaign] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    goalAmount: \"\",\r\n    category: \"Other\",\r\n    image: \"\"\r\n  });\r\n  const [errors, setErrors] = useState([]);\r\n  const [success, setSuccess] = useState('');\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    // Client-side validation to avoid backend validation errors\r\n    if (!campaign.title || campaign.title.trim().length < 5) {\r\n      setErrors(['Title must be at least 5 characters long']);\r\n      return;\r\n    }\r\n    if (!campaign.description || campaign.description.trim().length < 20) {\r\n      setErrors(['Description must be at least 20 characters long']);\r\n      return;\r\n    }\r\n    if (!campaign.goalAmount || Number(campaign.goalAmount) <= 0) {\r\n      setErrors(['Goal amount must be a positive number']);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setErrors([]);\r\n      setSuccess('');\r\n      // Ensure goalAmount is sent as a number\r\n      const payload = { ...campaign, goalAmount: Number(campaign.goalAmount) };\r\n\r\n      await api.post(`/campaigns/create`, payload);\r\n      setSuccess('Campaign created successfully!');\r\n      setTimeout(() => navigate('/ngo-dashboard/manage'), 800);\r\n    } catch (error) {\r\n      console.error('CreateCampaign error:', error);\r\n      const resp = error.response?.data;\r\n      if (resp && resp.error && Array.isArray(resp.error.details) && resp.error.details.length > 0) {\r\n        setErrors(resp.error.details.map(d => d.message || d.msg || JSON.stringify(d)));\r\n        return;\r\n      }\r\n      setErrors([resp?.message || 'Error creating campaign']);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setCampaign({\r\n      ...campaign,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"create-campaign\">\r\n      <h2>Create New Campaign</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        {errors.length > 0 && (\r\n          <div className=\"form-errors\">\r\n            <ul>\r\n              {errors.map((err, idx) => (\r\n                <li key={idx} style={{ color: 'red' }}>{err}</li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n        {success && (\r\n          <div className=\"form-success\" style={{ color: 'green' }}>{success}</div>\r\n        )}\r\n        <div className=\"form-group\">\r\n          <label>Campaign Title</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            value={campaign.title}\r\n            onChange={handleChange}\r\n            required\r\n            placeholder=\"Enter campaign title\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Description</label>\r\n          <textarea\r\n            name=\"description\"\r\n            value={campaign.description}\r\n            onChange={handleChange}\r\n            required\r\n            placeholder=\"Describe your campaign\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Goal Amount (â‚¹)</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"goalAmount\"\r\n            value={campaign.goalAmount}\r\n            onChange={handleChange}\r\n            required\r\n            placeholder=\"Enter target amount\"\r\n            min=\"1\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Category</label>\r\n          <select \r\n            name=\"category\" \r\n            value={campaign.category} \r\n            onChange={handleChange}\r\n          >\r\n            <option value=\"Food\">Food</option>\r\n            <option value=\"Education\">Education</option>\r\n            <option value=\"Health\">Health</option>\r\n            <option value=\"Environment\">Environment</option>\r\n            <option value=\"Other\">Other</option>\r\n          </select>\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Campaign Image URL</label>\r\n          <input\r\n            type=\"url\"\r\n            name=\"image\"\r\n            value={campaign.image}\r\n            onChange={handleChange}\r\n            placeholder=\"Enter image URL\"\r\n          />\r\n          {campaign.image ? (\r\n            <img \r\n              src={campaign.image} \r\n              alt=\"Campaign preview\" \r\n              className=\"preview-image\"\r\n              onError={(e) => e.target.style.display = 'none'}\r\n            />\r\n          ) : (\r\n            <div className=\"image-placeholder\">\r\n              Image preview will appear here\r\n            </div>\r\n          )}\r\n        </div>\r\n        <button type=\"submit\">Create Campaign</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateCampaign;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}