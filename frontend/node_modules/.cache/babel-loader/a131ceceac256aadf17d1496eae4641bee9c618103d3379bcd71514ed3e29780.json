{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import api from\"../../utils/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyDonations=()=>{const[donations,setDonations]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");useEffect(()=>{const fetchMyDonations=async()=>{setLoading(true);try{var _res$data$donations,_res$data;const res=await api.get(\"/donations/my-donations\");// backend returns { timestamp, donations }\nconst data=(_res$data$donations=(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.donations)!==null&&_res$data$donations!==void 0?_res$data$donations:[];setDonations(Array.isArray(data)?data:[]);}catch(err){var _err$response,_err$response2,_err$response2$data;console.error(\"Failed to load donations\",((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err);setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Failed to load donations\");}finally{setLoading(false);}};fetchMyDonations();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"my-donations-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Donations\"}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),!loading&&donations.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"You haven't made any donations yet.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"donations-list\",children:donations.map(d=>{var _d$campaignId;return/*#__PURE__*/_jsxs(\"div\",{className:\"donation-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:((_d$campaignId=d.campaignId)===null||_d$campaignId===void 0?void 0:_d$campaignId.title)||'Campaign'}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Type: \",d.donationType]}),d.donationType==='money'&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Amount: \\u20B9\",d.amount]}),d.donationType==='items'&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Items: \",d.itemDetails]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date: \",new Date(d.createdAt).toLocaleString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",d.status]})]},d._id);})})]});};export default MyDonations;","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","MyDonations","donations","setDonations","loading","setLoading","error","setError","fetchMyDonations","_res$data$donations","_res$data","res","get","data","Array","isArray","err","_err$response","_err$response2","_err$response2$data","console","response","message","className","children","length","map","d","_d$campaignId","campaignId","title","donationType","amount","itemDetails","Date","createdAt","toLocaleString","status","_id"],"sources":["E:/SEM5/Mini_Project/donation-management-system/frontend/src/pages/donor/MyDonations.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport api from \"../../utils/api\";\r\n\r\nconst MyDonations = () => {\r\n  const [donations, setDonations] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchMyDonations = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await api.get(\"/donations/my-donations\");\r\n        // backend returns { timestamp, donations }\r\n        const data = res.data?.donations ?? [];\r\n        setDonations(Array.isArray(data) ? data : []);\r\n      } catch (err) {\r\n        console.error(\"Failed to load donations\", err.response?.data || err);\r\n        setError(err.response?.data?.message || \"Failed to load donations\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchMyDonations();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"my-donations-page\">\r\n      <h1>My Donations</h1>\r\n\r\n      {loading && <p>Loading...</p>}\r\n      {error && <div className=\"error\">{error}</div>}\r\n\r\n      {!loading && donations.length === 0 && <p>You haven't made any donations yet.</p>}\r\n\r\n      <div className=\"donations-list\">\r\n        {donations.map((d) => (\r\n          <div key={d._id} className=\"donation-card\">\r\n            <h3>{d.campaignId?.title || 'Campaign'}</h3>\r\n            <p>Type: {d.donationType}</p>\r\n            {d.donationType === 'money' && <p>Amount: â‚¹{d.amount}</p>}\r\n            {d.donationType === 'items' && <p>Items: {d.itemDetails}</p>}\r\n            <p>Date: {new Date(d.createdAt).toLocaleString()}</p>\r\n            <p>Status: {d.status}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyDonations;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}